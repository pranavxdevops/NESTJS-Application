'use client';
import { cn } from '@/lib/utils/cn';
import Image from 'next/image';
import { useEffect, useState, useRef } from 'react';
import { usePathname, useRouter, useParams } from 'next/navigation';

interface NavItem {
  label: string;
  icon: React.ReactNode;
  hasNotification?: boolean;
  notificationCount?: number;
  onClick?: () => void;
  path?: string; // Add path to match against current route
}

interface NavigationBarProps {
  logoSrc?: string;
  items?: NavItem[];
  className?: string;
}

export default function NavigationBar({
  logoSrc = 'https://api.builder.io/api/v1/image/assets/TEMP/5fe03ba44a7675f5fe353a59a65f440da75cb7ae?width=276',
  items = [],
  className,
}: NavigationBarProps) {
  const router = useRouter();
  const params = useParams();
  const locale = (params?.locale as string) || 'en';
  const defaultItems: NavItem[] = [
    {
      label: 'Events',
      hasNotification: false,
      path: '/events/dashboard',
      icon: (
        <svg
          width="18"
          height="20"
          viewBox="0 0 18 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.5 16C10.8 16 10.2083 15.7583 9.725 15.275C9.24167 14.7917 9 14.2 9 13.5C9 12.8 9.24167 12.2083 9.725 11.725C10.2083 11.2417 10.8 11 11.5 11C12.2 11 12.7917 11.2417 13.275 11.725C13.7583 12.2083 14 12.8 14 13.5C14 14.2 13.7583 14.7917 13.275 15.275C12.7917 15.7583 12.2 16 11.5 16ZM2 20C1.45 20 0.979167 19.8042 0.5875 19.4125C0.195833 19.0208 0 18.55 0 18V4C0 3.45 0.195833 2.97917 0.5875 2.5875C0.979167 2.19583 1.45 2 2 2H3V1C3 0.716667 3.09583 0.479167 3.2875 0.2875C3.47917 0.0958333 3.71667 0 4 0C4.28333 0 4.52083 0.0958333 4.7125 0.2875C4.90417 0.479167 5 0.716667 5 1V2H13V1C13 0.716667 13.0958 0.479167 13.2875 0.2875C13.4792 0.0958333 13.7167 0 14 0C14.2833 0 14.5208 0.0958333 14.7125 0.2875C14.9042 0.479167 15 0.716667 15 1V2H16C16.55 2 17.0208 2.19583 17.4125 2.5875C17.8042 2.97917 18 3.45 18 4V18C18 18.55 17.8042 19.0208 17.4125 19.4125C17.0208 19.8042 16.55 20 16 20H2ZM2 18H16V8H2V18ZM2 6H16V4H2V6Z"
            fill="white"
          />
        </svg>
      ),
    },
    {
      label: 'Knowledge',
      path: '/knowledge/dashboard',
      icon: (
        <svg
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M6.75 18C5.9 18 5.16667 17.7042 4.55 17.1125C3.93333 16.5208 3.58333 15.8083 3.5 14.975C2.5 14.8417 1.66667 14.4 1 13.65C0.333333 12.9 0 12.0167 0 11C0 10.65 0.0458333 10.3042 0.1375 9.9625C0.229167 9.62083 0.366667 9.3 0.55 9C0.366667 8.7 0.229167 8.38333 0.1375 8.05C0.0458333 7.71667 0 7.36667 0 7C0 5.98333 0.333333 5.10417 1 4.3625C1.66667 3.62083 2.49167 3.18333 3.475 3.05C3.525 2.2 3.86667 1.47917 4.5 0.8875C5.13333 0.295833 5.88333 0 6.75 0C7.18333 0 7.5875 0.0833333 7.9625 0.25C8.3375 0.416667 8.68333 0.641667 9 0.925C9.3 0.641667 9.64167 0.416667 10.025 0.25C10.4083 0.0833333 10.8167 0 11.25 0C12.1167 0 12.8625 0.291667 13.4875 0.875C14.1125 1.45833 14.45 2.175 14.5 3.025C15.4833 3.15833 16.3125 3.6 16.9875 4.35C17.6625 5.1 18 5.98333 18 7C18 7.36667 17.9542 7.71667 17.8625 8.05C17.7708 8.38333 17.6333 8.7 17.45 9C17.6333 9.3 17.7708 9.62083 17.8625 9.9625C17.9542 10.3042 18 10.65 18 11C18 12.0333 17.6625 12.9208 16.9875 13.6625C16.3125 14.4042 15.475 14.8417 14.475 14.975C14.3917 15.8083 14.0458 16.5208 13.4375 17.1125C12.8292 17.7042 12.1 18 11.25 18C10.8333 18 10.4292 17.9208 10.0375 17.7625C9.64583 17.6042 9.3 17.3833 9 17.1C8.68333 17.3833 8.33333 17.6042 7.95 17.7625C7.56667 17.9208 7.16667 18 6.75 18ZM10 3.25V14.75C10 15.1 10.1208 15.3958 10.3625 15.6375C10.6042 15.8792 10.9 16 11.25 16C11.5833 16 11.8708 15.8667 12.1125 15.6C12.3542 15.3333 12.4833 15.0333 12.5 14.7C12.15 14.5667 11.8292 14.3875 11.5375 14.1625C11.2458 13.9375 10.9833 13.6667 10.75 13.35C10.5833 13.1167 10.5208 12.8667 10.5625 12.6C10.6042 12.3333 10.7417 12.1167 10.975 11.95C11.2083 11.7833 11.4583 11.7208 11.725 11.7625C11.9917 11.8042 12.2083 11.9417 12.375 12.175C12.5583 12.4417 12.7917 12.6458 13.075 12.7875C13.3583 12.9292 13.6667 13 14 13C14.55 13 15.0208 12.8042 15.4125 12.4125C15.8042 12.0208 16 11.55 16 11C16 10.9167 15.9958 10.8333 15.9875 10.75C15.9792 10.6667 15.9583 10.5833 15.925 10.5C15.6417 10.6667 15.3375 10.7917 15.0125 10.875C14.6875 10.9583 14.35 11 14 11C13.7167 11 13.4792 10.9042 13.2875 10.7125C13.0958 10.5208 13 10.2833 13 10C13 9.71667 13.0958 9.47917 13.2875 9.2875C13.4792 9.09583 13.7167 9 14 9C14.55 9 15.0208 8.80417 15.4125 8.4125C15.8042 8.02083 16 7.55 16 7C16 6.45 15.8042 5.98333 15.4125 5.6C15.0208 5.21667 14.55 5.01667 14 5C13.8167 5.3 13.5792 5.5625 13.2875 5.7875C12.9958 6.0125 12.675 6.19167 12.325 6.325C12.0583 6.425 11.8 6.41667 11.55 6.3C11.3 6.18333 11.1333 5.99167 11.05 5.725C10.9667 5.45833 10.9792 5.2 11.0875 4.95C11.1958 4.7 11.3833 4.53333 11.65 4.45C11.9 4.36667 12.1042 4.21667 12.2625 4C12.4208 3.78333 12.5 3.53333 12.5 3.25C12.5 2.9 12.3792 2.60417 12.1375 2.3625C11.8958 2.12083 11.6 2 11.25 2C10.9 2 10.6042 2.12083 10.3625 2.3625C10.1208 2.60417 10 2.9 10 3.25ZM8 14.75V3.25C8 2.9 7.87917 2.60417 7.6375 2.3625C7.39583 2.12083 7.1 2 6.75 2C6.4 2 6.10417 2.12083 5.8625 2.3625C5.62083 2.60417 5.5 2.9 5.5 3.25C5.5 3.51667 5.575 3.7625 5.725 3.9875C5.875 4.2125 6.075 4.36667 6.325 4.45C6.59167 4.53333 6.78333 4.7 6.9 4.95C7.01667 5.2 7.03333 5.45833 6.95 5.725C6.85 5.99167 6.675 6.18333 6.425 6.3C6.175 6.41667 5.91667 6.425 5.65 6.325C5.3 6.19167 4.97917 6.0125 4.6875 5.7875C4.39583 5.5625 4.15833 5.3 3.975 5C3.44167 5.01667 2.97917 5.22083 2.5875 5.6125C2.19583 6.00417 2 6.46667 2 7C2 7.55 2.19583 8.02083 2.5875 8.4125C2.97917 8.80417 3.45 9 4 9C4.28333 9 4.52083 9.09583 4.7125 9.2875C4.90417 9.47917 5 9.71667 5 10C5 10.2833 4.90417 10.5208 4.7125 10.7125C4.52083 10.9042 4.28333 11 4 11C3.65 11 3.3125 10.9583 2.9875 10.875C2.6625 10.7917 2.35833 10.6667 2.075 10.5C2.04167 10.5833 2.02083 10.6667 2.0125 10.75C2.00417 10.8333 2 10.9167 2 11C2 11.55 2.19583 12.0208 2.5875 12.4125C2.97917 12.8042 3.45 13 4 13C4.33333 13 4.64167 12.9292 4.925 12.7875C5.20833 12.6458 5.44167 12.4417 5.625 12.175C5.79167 11.9417 6.00833 11.8042 6.275 11.7625C6.54167 11.7208 6.79167 11.7833 7.025 11.95C7.25833 12.1167 7.39583 12.3333 7.4375 12.6C7.47917 12.8667 7.41667 13.1167 7.25 13.35C7.01667 13.6667 6.75 13.9417 6.45 14.175C6.15 14.4083 5.825 14.5917 5.475 14.725C5.49167 15.0583 5.625 15.3542 5.875 15.6125C6.125 15.8708 6.41667 16 6.75 16C7.1 16 7.39583 15.8792 7.6375 15.6375C7.87917 15.3958 8 15.1 8 14.75Z"
            fill="white"
          />
        </svg>
      ),
    },
    {
      label: 'Network',
      path: '/network',
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M3.5 20C2.53333 20 1.70833 19.6583 1.025 18.975C0.341667 18.2917 0 17.4667 0 16.5C0 15.5333 0.341667 14.7083 1.025 14.025C1.70833 13.3417 2.53333 13 3.5 13C3.8 13 4.09167 13.0375 4.375 13.1125C4.65833 13.1875 4.925 13.2917 5.175 13.425L9 9.6V6.85C8.26667 6.63333 7.66667 6.22083 7.2 5.6125C6.73333 5.00417 6.5 4.3 6.5 3.5C6.5 2.53333 6.84167 1.70833 7.525 1.025C8.20833 0.341667 9.03333 0 10 0C10.9667 0 11.7917 0.341667 12.475 1.025C13.1583 1.70833 13.5 2.53333 13.5 3.5C13.5 4.3 13.2667 5.00417 12.8 5.6125C12.3333 6.22083 11.7333 6.63333 11 6.85V9.6L14.85 13.425C15.1 13.2917 15.3625 13.1875 15.6375 13.1125C15.9125 13.0375 16.2 13 16.5 13C17.4667 13 18.2917 13.3417 18.975 14.025C19.6583 14.7083 20 15.5333 20 16.5C20 17.4667 19.6583 18.2917 18.975 18.975C18.2917 19.6583 17.4667 20 16.5 20C15.5333 20 14.7083 19.6583 14.025 18.975C13.3417 18.2917 13 17.4667 13 16.5C13 16.2 13.0375 15.9083 13.1125 15.625C13.1875 15.3417 13.2917 15.075 13.425 14.825L10 11.4L6.575 14.825C6.70833 15.075 6.8125 15.3417 6.8875 15.625C6.9625 15.9083 7 16.2 7 16.5C7 17.4667 6.65833 18.2917 5.975 18.975C5.29167 19.6583 4.46667 20 3.5 20ZM16.5 18C16.9167 18 17.2708 17.8542 17.5625 17.5625C17.8542 17.2708 18 16.9167 18 16.5C18 16.0833 17.8542 15.7292 17.5625 15.4375C17.2708 15.1458 16.9167 15 16.5 15C16.0833 15 15.7292 15.1458 15.4375 15.4375C15.1458 15.7292 15 16.0833 15 16.5C15 16.9167 15.1458 17.2708 15.4375 17.5625C15.7292 17.8542 16.0833 18 16.5 18ZM10 5C10.4167 5 10.7708 4.85417 11.0625 4.5625C11.3542 4.27083 11.5 3.91667 11.5 3.5C11.5 3.08333 11.3542 2.72917 11.0625 2.4375C10.7708 2.14583 10.4167 2 10 2C9.58333 2 9.22917 2.14583 8.9375 2.4375C8.64583 2.72917 8.5 3.08333 8.5 3.5C8.5 3.91667 8.64583 4.27083 8.9375 4.5625C9.22917 4.85417 9.58333 5 10 5ZM3.5 18C3.91667 18 4.27083 17.8542 4.5625 17.5625C4.85417 17.2708 5 16.9167 5 16.5C5 16.0833 4.85417 15.7292 4.5625 15.4375C4.27083 15.1458 3.91667 15 3.5 15C3.08333 15 2.72917 15.1458 2.4375 15.4375C2.14583 15.7292 2 16.0833 2 16.5C2 16.9167 2.14583 17.2708 2.4375 17.5625C2.72917 17.8542 3.08333 18 3.5 18Z"
            fill="white"
          />
        </svg>
      ),
      hasNotification: false,
    },
    {
      label: 'Publications',
      path: '/news-publications/dashboard',
      icon: (
        <svg
          width="20"
          height="18"
          viewBox="0 0 20 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2 18C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H18C18.55 0 19.0208 0.195833 19.4125 0.5875C19.8042 0.979167 20 1.45 20 2V16C20 16.55 19.8042 17.0208 19.4125 17.4125C19.0208 17.8042 18.55 18 18 18H2ZM2 16H18V2H2V16ZM5 14H15C15.2833 14 15.5208 13.9042 15.7125 13.7125C15.9042 13.5208 16 13.2833 16 13C16 12.7167 15.9042 12.4792 15.7125 12.2875C15.5208 12.0958 15.2833 12 15 12H5C4.71667 12 4.47917 12.0958 4.2875 12.2875C4.09583 12.4792 4 12.7167 4 13C4 13.2833 4.09583 13.5208 4.2875 13.7125C4.47917 13.9042 4.71667 14 5 14ZM5 10H7C7.28333 10 7.52083 9.90417 7.7125 9.7125C7.90417 9.52083 8 9.28333 8 9V5C8 4.71667 7.90417 4.47917 7.7125 4.2875C7.52083 4.09583 7.28333 4 7 4H5C4.71667 4 4.47917 4.09583 4.2875 4.2875C4.09583 4.47917 4 4.71667 4 5V9C4 9.28333 4.09583 9.52083 4.2875 9.7125C4.47917 9.90417 4.71667 10 5 10ZM11 10H15C15.2833 10 15.5208 9.90417 15.7125 9.7125C15.9042 9.52083 16 9.28333 16 9C16 8.71667 15.9042 8.47917 15.7125 8.2875C15.5208 8.09583 15.2833 8 15 8H11C10.7167 8 10.4792 8.09583 10.2875 8.2875C10.0958 8.47917 10 8.71667 10 9C10 9.28333 10.0958 9.52083 10.2875 9.7125C10.4792 9.90417 10.7167 10 11 10ZM11 6H15C15.2833 6 15.5208 5.90417 15.7125 5.7125C15.9042 5.52083 16 5.28333 16 5C16 4.71667 15.9042 4.47917 15.7125 4.2875C15.5208 4.09583 15.2833 4 15 4H11C10.7167 4 10.4792 4.09583 10.2875 4.2875C10.0958 4.47917 10 4.71667 10 5C10 5.28333 10.0958 5.52083 10.2875 5.7125C10.4792 5.90417 10.7167 6 11 6Z"
            fill="white"
          />
        </svg>
      ),
      hasNotification: false,
    },
    {
      label: 'Inbox',
      path: '/inbox',
      icon: (
        <svg
          width="20"
          height="16"
          viewBox="0 0 20 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2 16C1.45 16 0.979167 15.8042 0.5875 15.4125C0.195833 15.0208 0 14.55 0 14V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H18C18.55 0 19.0208 0.195833 19.4125 0.5875C19.8042 0.979167 20 1.45 20 2V14C20 14.55 19.8042 15.0208 19.4125 15.4125C19.0208 15.8042 18.55 16 18 16H2ZM18 4L10.525 8.675C10.4417 8.725 10.3542 8.7625 10.2625 8.7875C10.1708 8.8125 10.0833 8.825 10 8.825C9.91667 8.825 9.82917 8.8125 9.7375 8.7875C9.64583 8.7625 9.55833 8.725 9.475 8.675L2 4V14H18V4ZM10 7L18 2H2L10 7ZM2 4.25V2.775V2.8V2.7875V4.25Z"
            fill="white"
          />
        </svg>
      ),
      hasNotification: false,
    },
    {
      label: 'Search',
      path: '/search',
      icon: (
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9.5 16C7.68333 16 6.14583 15.3708 4.8875 14.1125C3.62917 12.8542 3 11.3167 3 9.5C3 7.68333 3.62917 6.14583 4.8875 4.8875C6.14583 3.62917 7.68333 3 9.5 3C11.3167 3 12.8542 3.62917 14.1125 4.8875C15.3708 6.14583 16 7.68333 16 9.5C16 10.2333 15.8833 10.925 15.65 11.575C15.4167 12.225 15.1 12.8 14.7 13.3L20.3 18.9C20.4833 19.0833 20.575 19.3167 20.575 19.6C20.575 19.8833 20.4833 20.1167 20.3 20.3C20.1167 20.4833 19.8833 20.575 19.6 20.575C19.3167 20.575 19.0833 20.4833 18.9 20.3L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16ZM9.5 14C10.75 14 11.8125 13.5625 12.6875 12.6875C13.5625 11.8125 14 10.75 14 9.5C14 8.25 13.5625 7.1875 12.6875 6.3125C11.8125 5.4375 10.75 5 9.5 5C8.25 5 7.1875 5.4375 6.3125 6.3125C5.4375 7.1875 5 8.25 5 9.5C5 10.75 5.4375 11.8125 6.3125 12.6875C7.1875 13.5625 8.25 14 9.5 14Z"
            fill="white"
          />
        </svg>
      ),
    },
    {
      label: 'Profile',
      path: '/profile',
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M3.85 15.1C4.7 14.45 5.65 13.9375 6.7 13.5625C7.75 13.1875 8.85 13 10 13C11.15 13 12.25 13.1875 13.3 13.5625C14.35 13.9375 15.3 14.45 16.15 15.1C16.7333 14.4167 17.1875 13.6417 17.5125 12.775C17.8375 11.9083 18 10.9833 18 10C18 7.78333 17.2208 5.89583 15.6625 4.3375C14.1042 2.77917 12.2167 2 10 2C7.78333 2 5.89583 2.77917 4.3375 4.3375C2.77917 5.89583 2 7.78333 2 10C2 10.9833 2.1625 11.9083 2.4875 12.775C2.8125 13.6417 3.26667 14.4167 3.85 15.1ZM10 11C9.01667 11 8.1875 10.6625 7.5125 9.9875C6.8375 9.3125 6.5 8.48333 6.5 7.5C6.5 6.51667 6.8375 5.6875 7.5125 5.0125C8.1875 4.3375 9.01667 4 10 4C10.9833 4 11.8125 4.3375 12.4875 5.0125C13.1625 5.6875 13.5 6.51667 13.5 7.5C13.5 8.48333 13.1625 9.3125 12.4875 9.9875C11.8125 10.6625 10.9833 11 10 11ZM10 20C8.61667 20 7.31667 19.7375 6.1 19.2125C4.88333 18.6875 3.825 17.975 2.925 17.075C2.025 16.175 1.3125 15.1167 0.7875 13.9C0.2625 12.6833 0 11.3833 0 10C0 8.61667 0.2625 7.31667 0.7875 6.1C1.3125 4.88333 2.025 3.825 2.925 2.925C3.825 2.025 4.88333 1.3125 6.1 0.7875C7.31667 0.2625 8.61667 0 10 0C11.3833 0 12.6833 0.2625 13.9 0.7875C15.1167 1.3125 16.175 2.025 17.075 2.925C17.975 3.825 18.6875 4.88333 19.2125 6.1C19.7375 7.31667 20 8.61667 20 10C20 11.3833 19.7375 12.6833 19.2125 13.9C18.6875 15.1167 17.975 16.175 17.075 17.075C16.175 17.975 15.1167 18.6875 13.9 19.2125C12.6833 19.7375 11.3833 20 10 20ZM10 18C10.8833 18 11.7167 17.8708 12.5 17.6125C13.2833 17.3542 14 16.9833 14.65 16.5C14 16.0167 13.2833 15.6458 12.5 15.3875C11.7167 15.1292 10.8833 15 10 15C9.11667 15 8.28333 15.1292 7.5 15.3875C6.71667 15.6458 6 16.0167 5.35 16.5C6 16.9833 6.71667 17.3542 7.5 17.6125C8.28333 17.8708 9.11667 18 10 18ZM10 9C10.4333 9 10.7917 8.85833 11.075 8.575C11.3583 8.29167 11.5 7.93333 11.5 7.5C11.5 7.06667 11.3583 6.70833 11.075 6.425C10.7917 6.14167 10.4333 6 10 6C9.56667 6 9.20833 6.14167 8.925 6.425C8.64167 6.70833 8.5 7.06667 8.5 7.5C8.5 7.93333 8.64167 8.29167 8.925 8.575C9.20833 8.85833 9.56667 9 10 9Z"
            fill="white"
          />
        </svg>
      ),
      hasNotification: false,
    },
  ];
  const HERO_BG =
    'https://api.builder.io/api/v1/image/assets/TEMP/cf38272f75b0b13150ab286d5c652b2c761f8324?width=1920';

  const navItems = items.length > 0 ? items : defaultItems;
  const pathname = usePathname();

  const [scrolled, setScrolled] = useState(false);
  const [isProfileDropdownOpen, setIsProfileDropdownOpen] = useState(false);
  const dropdownRef = useRef<HTMLDivElement>(null);

  // Helper function to check if a nav item is active
  const isActive = (itemPath?: string) => {
    if (!itemPath) return false;
    // Remove locale prefix from pathname (e.g., /en/events -> /events)
    const pathWithoutLocale = pathname.replace(/^\/(en|fr|es)/, '');
    // Check if current path starts with the item path
    return pathWithoutLocale.startsWith(itemPath);
  };

  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 100);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  // Close dropdown when clicking outside
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {
        setIsProfileDropdownOpen(false);
      }
    };

    if (isProfileDropdownOpen) {
      document.addEventListener('mousedown', handleClickOutside);
    }

    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [isProfileDropdownOpen]);

  const handleLogout = async () => {
    try {
      console.log('üö™ Starting logout...');
      // Import the unified auth client
      const { logout } = await import("@/lib/auth/authClient");
      await logout();
      
      console.log('‚úÖ Logout completed');
      setIsProfileDropdownOpen(false);
      // Navigate to home page with locale
      router.push(`/${locale}`);
      router.refresh();
    } catch (error) {
      console.error('‚ùå Logout failed:', error);
    }
  };

  return (
    <nav className="fixed top-0 left-0 right-0 z-50 ">
      {/* üîπ BLURRED BACKGROUND IMAGE (only when scrolled) */}
      <div className="absolute inset-0 overflow-hidden -z-10">
        {scrolled && (
          <div
            className="absolute inset-0 bg-cover bg-center"
            style={{
              backgroundImage: `url(${HERO_BG})`,
              filter: 'blur(20px)',
              transform: 'scale(1.1)',
            }}
          />
        )}
      </div>
      {/* üîπ GRADIENT OVERLAY (before scroll) */}
      {!scrolled && <div className="absolute inset-0 glass-effect" />}

      {/* üîπ DARK OVERLAY (both states) */}
      <div
        className={cn(
          'absolute inset-0 transition-opacity duration-500',
          scrolled ? 'bg-black/50' : 'bg-black/20'
        )}
      />

      {/* üîπ CONTENT (always sharp) */}
      <div className="relative flex items-center justify-between px-8 lg:px-30 py-2">
        <img src={logoSrc} alt="Logo" className="w-[130px] h-8 object-contain" />

        {/* üîπ MOBILE HEADER ICONS (Inbox, Search, Profile) */}
        <div className="flex xl:hidden items-center gap-4">
          {/* Inbox Icon with Notification */}
          <button className="relative p-2">
            <svg
              width="24"
              height="20"
              viewBox="0 0 24 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M2.4 19.2C1.74 19.2 1.175 18.965 0.705 18.495C0.235 18.025 0 17.46 0 16.8V2.4C0 1.74 0.235 1.175 0.705 0.705C1.175 0.235 1.74 0 2.4 0H21.6C22.26 0 22.825 0.235 23.295 0.705C23.765 1.175 24 1.74 24 2.4V16.8C24 17.46 23.765 18.025 23.295 18.495C22.825 18.965 22.26 19.2 21.6 19.2H2.4ZM21.6 4.8L12.63 10.41C12.53 10.47 12.425 10.515 12.315 10.545C12.205 10.575 12.1 10.59 12 10.59C11.9 10.59 11.795 10.575 11.685 10.545C11.575 10.515 11.47 10.47 11.37 10.41L2.4 4.8V16.8H21.6V4.8ZM12 8.4L21.6 2.4H2.4L12 8.4ZM2.4 5.1V3.33V3.36V3.345V5.1Z"
                fill="white"
              />
            </svg>
            <div className="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full" />
          </button>

          {/* Search Icon */}
          <button className="p-2">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.5 16C7.68333 16 6.14583 15.3708 4.8875 14.1125C3.62917 12.8542 3 11.3167 3 9.5C3 7.68333 3.62917 6.14583 4.8875 4.8875C6.14583 3.62917 7.68333 3 9.5 3C11.3167 3 12.8542 3.62917 14.1125 4.8875C15.3708 6.14583 16 7.68333 16 9.5C16 10.2333 15.8833 10.925 15.65 11.575C15.4167 12.225 15.1 12.8 14.7 13.3L20.3 18.9C20.4833 19.0833 20.575 19.3167 20.575 19.6C20.575 19.8833 20.4833 20.1167 20.3 20.3C20.1167 20.4833 19.8833 20.575 19.6 20.575C19.3167 20.575 19.0833 20.4833 18.9 20.3L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16ZM9.5 14C10.75 14 11.8125 13.5625 12.6875 12.6875C13.5625 11.8125 14 10.75 14 9.5C14 8.25 13.5625 7.1875 12.6875 6.3125C11.8125 5.4375 10.75 5 9.5 5C8.25 5 7.1875 5.4375 6.3125 6.3125C5.4375 7.1875 5 8.25 5 9.5C5 10.75 5.4375 11.8125 6.3125 12.6875C7.1875 13.5625 8.25 14 9.5 14Z"
                fill="white"
              />
            </svg>
          </button>

          {/* Profile Icon */}
          <button className="p-2">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4.62 18.12C5.64 17.34 6.78 16.725 8.04 16.275C9.3 15.825 10.62 15.6 12 15.6C13.38 15.6 14.7 15.825 15.96 16.275C17.22 16.725 18.36 17.34 19.38 18.12C20.08 17.3 20.625 16.37 21.015 15.33C21.405 14.29 21.6 13.18 21.6 12C21.6 9.34 20.665 7.075 18.795 5.205C16.925 3.335 14.66 2.4 12 2.4C9.34 2.4 7.075 3.335 5.205 5.205C3.335 7.075 2.4 9.34 2.4 12C2.4 13.18 2.595 14.29 2.985 15.33C3.375 16.37 3.92 17.3 4.62 18.12ZM12 13.2C10.82 13.2 9.825 12.795 9.015 11.985C8.205 11.175 7.8 10.18 7.8 9C7.8 7.82 8.205 6.825 9.015 6.015C9.825 5.205 10.82 4.8 12 4.8C13.18 4.8 14.175 5.205 14.985 6.015C15.795 6.825 16.2 7.82 16.2 9C16.2 10.18 15.795 11.175 14.985 11.985C14.175 12.795 13.18 13.2 12 13.2ZM12 24C10.34 24 8.78 23.685 7.32 23.055C5.86 22.425 4.59 21.57 3.51 20.49C2.43 19.41 1.575 18.14 0.945 16.68C0.315 15.22 0 13.66 0 12C0 10.34 0.315 8.78 0.945 7.32C1.575 5.86 2.43 4.59 3.51 3.51C4.59 2.43 5.86 1.575 7.32 0.945C8.78 0.315 10.34 0 12 0C13.66 0 15.22 0.315 16.68 0.945C18.14 1.575 19.41 2.43 20.49 3.51C21.57 4.59 22.425 5.86 23.055 7.32C23.685 8.78 24 10.34 24 12C24 13.66 23.685 15.22 23.055 16.68C22.425 18.14 21.57 19.41 20.49 20.49C19.41 21.57 18.14 22.425 16.68 23.055C15.22 23.685 13.66 24 12 24ZM12 21.6C13.06 21.6 14.06 21.445 15 21.135C15.94 20.825 16.8 20.38 17.58 19.8C16.8 19.22 15.94 18.775 15 18.465C14.06 18.155 13.06 18 12 18C10.94 18 9.94 18.155 9 18.465C8.06 18.775 7.2 19.22 6.42 19.8C7.2 20.38 8.06 20.825 9 21.135C9.94 21.445 10.94 21.6 12 21.6ZM12 10.8C12.52 10.8 12.95 10.63 13.29 10.29C13.63 9.95 13.8 9.52 13.8 9C13.8 8.48 13.63 8.05 13.29 7.71C12.95 7.37 12.52 7.2 12 7.2C11.48 7.2 11.05 7.37 10.71 7.71C10.37 8.05 10.2 8.48 10.2 9C10.2 9.52 10.37 9.95 10.71 10.29C11.05 10.63 11.48 10.8 12 10.8Z"
                fill="white"
              />
            </svg>
          </button>
        </div>

        <div className="hidden lg:flex items-center gap-4">
          {navItems.map((item, idx) => {
            const itemIsActive = isActive(item.path);
            return (
              <div
                key={idx}
                className="relative"
                ref={item.label === 'Profile' ? dropdownRef : null}
              >
                <button
                  onClick={() => {
                    if (item.label === 'Profile') {
                      setIsProfileDropdownOpen(!isProfileDropdownOpen);
                    } else if (item.path) {
                      router.push(`/${locale}${item.path}`);
                    }
                    else {
                      item.onClick?.();
                  }}}
                  className={cn(
                    'flex flex-col items-center gap-2 px-4 py-2',
                    'rounded-xl border',
                    'transition-colors duration-200',
                    'cursor-pointer',
                    // Active state: same as hover effect
                    itemIsActive ? 'border-white/40' : 'border-transparent hover:border-white/40'
                  )}
                >
                  <div className="relative">
                    {item.icon}
                    {item.hasNotification && (
                      <div className="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white">
                        <div className="w-1.5 h-1.5 bg-red-200 rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2" />
                      </div>
                    )}
                  </div>

                  <div className="flex items-center gap-1">
                    <span className="text-white font-source text-base font-semibold leading-6">
                      {item.label}
                    </span>
                    {/* ‚ñº Dropdown arrow only for Profile */}
                    {item.label === 'Profile' && (
                      <Image
                        src="/assets/dropdown_white.svg"
                        alt="Dropdown"
                        width={24}
                        height={24}
                        className={cn(
                          'opacity-90 transition-transform duration-200',
                          isProfileDropdownOpen && 'rotate-180'
                        )}
                      />
                    )}
                  </div>
                </button>

                {/* Profile Dropdown Menu */}
                {item.label === 'Profile' && isProfileDropdownOpen && (
                  <div className="absolute top-full right-0 mt-2 w-[240px] bg-[#FFFFFF] rounded-xl shadow-lg overflow-hidden z-50">
                    {/* Manage Profile */}
                    <button
                      onClick={() => {
                        setIsProfileDropdownOpen(false);
                        router.push(`/${locale}/profile`);
                      }}
                      className="group w-full flex items-center gap-3 px-4 py-3
             text-[#333333]
             hover:bg-[#F4EEE7]
             hover:text-[#8B6941]
             transition-colors cursor-pointer"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 20 20"
                        className="text-[#808080] group-hover:text-[#8B6941] shrink-0"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path d="M3.85 15.1C4.7 14.45 5.65 13.9375 6.7 13.5625C7.75 13.1875 8.85 13 10 13C11.15 13 12.25 13.1875 13.3 13.5625C14.35 13.9375 15.3 14.45 16.15 15.1C16.7333 14.4167 17.1875 13.6417 17.5125 12.775C17.8375 11.9083 18 10.9833 18 10C18 7.78333 17.2208 5.89583 15.6625 4.3375C14.1042 2.77917 12.2167 2 10 2C7.78333 2 5.89583 2.77917 4.3375 4.3375C2.77917 5.89583 2 7.78333 2 10C2 10.9833 2.1625 11.9083 2.4875 12.775C2.8125 13.6417 3.26667 14.4167 3.85 15.1ZM10 11C9.01667 11 8.1875 10.6625 7.5125 9.9875C6.8375 9.3125 6.5 8.48333 6.5 7.5C6.5 6.51667 6.8375 5.6875 7.5125 5.0125C8.1875 4.3375 9.01667 4 10 4C10.9833 4 11.8125 4.3375 12.4875 5.0125C13.1625 5.6875 13.5 6.51667 13.5 7.5C13.5 8.48333 13.1625 9.3125 12.4875 9.9875C11.8125 10.6625 10.9833 11 10 11ZM10 20C8.61667 20 7.31667 19.7375 6.1 19.2125C4.88333 18.6875 3.825 17.975 2.925 17.075C2.025 16.175 1.3125 15.1167 0.7875 13.9C0.2625 12.6833 0 11.3833 0 10C0 8.61667 0.2625 7.31667 0.7875 6.1C1.3125 4.88333 2.025 3.825 2.925 2.925C3.825 2.025 4.88333 1.3125 6.1 0.7875C7.31667 0.2625 8.61667 0 10 0C11.3833 0 12.6833 0.2625 13.9 0.7875C15.1167 1.3125 16.175 2.025 17.075 2.925C17.975 3.825 18.6875 4.88333 19.2125 6.1C19.7375 7.31667 20 8.61667 20 10C20 11.3833 19.7375 12.6833 19.2125 13.9C18.6875 15.1167 17.975 16.175 17.075 17.075C16.175 17.975 15.1167 18.6875 13.9 19.2125C12.6833 19.7375 11.3833 20 10 20ZM10 18C10.8833 18 11.7167 17.8708 12.5 17.6125C13.2833 17.3542 14 16.9833 14.65 16.5C14 16.0167 13.2833 15.6458 12.5 15.3875C11.7167 15.1292 10.8833 15 10 15C9.11667 15 8.28333 15.1292 7.5 15.3875C6.71667 15.6458 6 16.0167 5.35 16.5C6 16.9833 6.71667 17.3542 7.5 17.6125C8.28333 17.8708 9.11667 18 10 18ZM10 9C10.4333 9 10.7917 8.85833 11.075 8.575C11.3583 8.29167 11.5 7.93333 11.5 7.5C11.5 7.06667 11.3583 6.70833 11.075 6.425C10.7917 6.14167 10.4333 6 10 6C9.56667 6 9.20833 6.14167 8.925 6.425C8.64167 6.70833 8.5 7.06667 8.5 7.5C8.5 7.93333 8.64167 8.29167 8.925 8.575C9.20833 8.85833 9.56667 9 10 9Z" />
                      </svg>

                      <span className=" font-source text-base font-medium ">Manage Profile</span>
                    </button>

                    {/* Main website */}
                    <button
                      onClick={() => {
                        setIsProfileDropdownOpen(false);
                        // Set flag to allow main website access
                        sessionStorage.setItem('allowMainWebsite', 'true');
                        window.location.href = `/${locale}`;
                      }}
                      className="group w-full flex items-center gap-3 px-4 py-3
             text-[#333333]
             hover:bg-[#F4EEE7]
             hover:text-[#8B6941]
             transition-colors cursor-pointer"
                    >
                      <svg
                        width="12"
                        height="21"
                        viewBox="0 0 12 21"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                        className="text-[#808080] group-hover:text-[#8B6941] shrink-0"
                      >
                        <path
                          d="M9.91615 0C9.39036 0.0177031 8.97989 0.0550764 8.4502 0.145559C8.98185 0.155394 9.31999 0.184899 9.76174 0.241943C9.77346 0.0924496 9.86729 0.0295052 9.9142 0.00196702L9.91615 0Z"
                          fill="currentColor"
                        />
                        <path
                          d="M6.88826 0.544922C5.91878 0.887182 5.37931 1.1901 4.84961 1.51072C5.55522 1.33763 6.10251 1.31009 6.6068 1.29042C6.62048 0.957994 6.75144 0.692448 6.88826 0.546889V0.544922Z"
                          fill="currentColor"
                        />
                        <path
                          d="M3.46598 3.02391C3.56567 2.66198 3.78654 2.30989 3.95854 2.12695C3.23925 2.68165 2.51995 3.40551 1.96094 4.17855C2.561 3.68286 2.93824 3.38781 3.46598 3.02194V3.02391Z"
                          fill="currentColor"
                        />
                        <path
                          d="M11.5678 1.70459C10.9091 1.42921 10.5143 1.19317 10.1898 0.943359C9.9983 1.44888 9.84779 1.89933 9.66992 2.56811C10.8114 2.04292 10.9463 1.97801 11.5678 1.70263V1.70459Z"
                          fill="currentColor"
                        />
                        <path
                          d="M8.94043 6.75267C9.36654 6.53629 10.5608 5.92652 11.5655 5.41313C11.0651 5.16135 9.78287 4.4611 9.30985 4.16211C9.1828 4.85646 9.03034 5.84784 8.93848 6.75267H8.94043Z"
                          fill="currentColor"
                        />
                        <path
                          d="M7.00771 2.41602C6.5562 3.03759 6.19264 3.70638 5.84863 4.47351C6.64416 4.03683 7.49246 3.61589 8.05538 3.34445C7.54523 2.96875 7.27159 2.7268 7.00771 2.41602Z"
                          fill="currentColor"
                        />
                        <path
                          d="M5.18196 6.35158C4.95914 7.24657 4.83013 8.13566 4.75586 9.1172C5.6022 8.56053 6.41923 8.08452 7.11702 7.70095C6.22572 7.13051 5.64911 6.73318 5.18392 6.34961L5.18196 6.35158Z"
                          fill="currentColor"
                        />
                        <path
                          d="M2.44531 6.61964C3.04342 6.16133 3.69821 5.73448 4.19859 5.42566C3.85849 5.02439 3.64739 4.6841 3.51839 4.33594C3.07274 5.01652 2.48831 6.36589 2.44531 6.61964Z"
                          fill="currentColor"
                        />
                        <path
                          d="M0.820934 6.15822C0.426104 7.06304 0.113367 8.11343 0 9.43919C0.22478 8.90023 0.631338 8.26489 1.03399 7.83608C0.785751 7.26958 0.736886 6.6421 0.820934 6.15625V6.15822Z"
                          fill="currentColor"
                        />
                        <path
                          d="M11.5714 10.2845C11.5714 10.2845 11.3017 10.133 10.9147 9.91665C10.3107 9.57635 9.41941 9.07477 8.80957 8.7207V11.8483C9.42136 11.4962 10.3107 10.9926 10.9147 10.6523C11.3017 10.434 11.5714 10.2845 11.5714 10.2845Z"
                          fill="currentColor"
                        />
                        <path
                          d="M9.76271 20.3301C9.32097 20.3871 8.98087 20.4166 8.45117 20.4265C8.97892 20.5169 9.39134 20.5543 9.91713 20.572C9.87022 20.5445 9.77639 20.4796 9.76467 20.332L9.76271 20.3301Z"
                          fill="currentColor"
                        />
                        <path
                          d="M4.84961 19.0586C5.37931 19.3792 5.91878 19.6821 6.88826 20.0244C6.74949 19.8769 6.62048 19.6133 6.6068 19.2809C6.10251 19.2612 5.55522 19.2317 4.84961 19.0606V19.0586Z"
                          fill="currentColor"
                        />
                        <path
                          d="M1.96094 16.3887C2.52191 17.1617 3.23925 17.8856 3.95854 18.4403C3.78654 18.2593 3.56567 17.9053 3.46598 17.5433C2.93629 17.1775 2.55905 16.8844 1.96094 16.3867V16.3887Z"
                          fill="currentColor"
                        />
                        <path
                          d="M10.1898 19.6228C10.5143 19.373 10.9091 19.1389 11.5678 18.8616C10.9443 18.5862 10.8095 18.5233 9.66992 17.9961C9.84779 18.6649 9.9983 19.1173 10.1898 19.6208V19.6228Z"
                          fill="currentColor"
                        />
                        <path
                          d="M11.5674 15.156C10.5608 14.6426 9.36653 14.0328 8.94238 13.8145C9.03425 14.7212 9.18475 15.7107 9.31376 16.405C9.78677 16.106 11.069 15.4077 11.5694 15.154L11.5674 15.156Z"
                          fill="currentColor"
                        />
                        <path
                          d="M7.00771 18.1552C7.27159 17.8444 7.54328 17.6044 8.05538 17.2267C7.49246 16.9533 6.64416 16.5343 5.84863 16.0977C6.1946 16.8648 6.5562 17.5336 7.00771 18.1552Z"
                          fill="currentColor"
                        />
                        <path
                          d="M7.11507 12.8655C6.41728 12.4839 5.60025 12.0059 4.75391 11.4492C4.83014 12.4327 4.95719 13.3198 5.18001 14.2148C5.64521 13.8313 6.22182 13.4339 7.11312 12.8635L7.11507 12.8655Z"
                          fill="currentColor"
                        />
                        <path
                          d="M3.51839 16.2329C3.64544 15.8848 3.85654 15.5425 4.19859 15.1432C3.69821 14.8344 3.04147 14.4075 2.44531 13.9492C2.48831 14.203 3.07274 15.5523 3.51839 16.2329Z"
                          fill="currentColor"
                        />
                        <path
                          d="M0 11.127C0.113367 12.4527 0.426104 13.5051 0.820934 14.4079C0.736886 13.9241 0.785751 13.2946 1.03399 12.7281C0.633292 12.2993 0.226734 11.6659 0 11.125V11.127Z"
                          fill="currentColor"
                        />
                        <path
                          d="M3.15136 10.2861C2.74089 9.92024 2.44965 9.64289 2.20728 9.39505C2.08805 9.2731 1.98055 9.15901 1.87695 9.04492V11.5253C1.98055 11.4112 2.08805 11.2972 2.20728 11.1772C2.44965 10.9293 2.74089 10.6539 3.15136 10.2861Z"
                          fill="currentColor"
                        />
                      </svg>
                      <span className="font-source text-base font-medium ">Main website</span>
                    </button>

                    {/* Settings */}
                    <button
                      onClick={() => setIsProfileDropdownOpen(false)}
                      className="group w-full flex items-center gap-3 px-4 py-3
             text-[#333333]
             hover:bg-[#F4EEE7]
             hover:text-[#8B6941]
             transition-colors cursor-pointer"
                    >
                      <svg
                        width="18"
                        height="19"
                        viewBox="0 0 18 19"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                        className="text-[#808080] group-hover:text-[#8B6941] shrink-0"
                      >
                        <path
                          d="M7.89078 19C7.54978 19 7.25528 18.8868 7.00728 18.6605C6.75911 18.4343 6.60811 18.1558 6.55428 17.825L6.31003 15.9538C6.0422 15.8641 5.76753 15.7385 5.48603 15.577C5.2047 15.4153 4.95311 15.2423 4.73128 15.0577L2.99853 15.7943C2.68436 15.9328 2.3687 15.9462 2.05153 15.8345C1.7342 15.723 1.4877 15.5205 1.31203 15.227L0.185029 13.273C0.00936264 12.9795 -0.0412207 12.6689 0.0332793 12.3413C0.107613 12.0138 0.278113 11.7436 0.544779 11.5308L2.04278 10.4058C2.01978 10.2571 2.00345 10.1077 1.99378 9.95775C1.98411 9.80775 1.97928 9.65833 1.97928 9.5095C1.97928 9.36733 1.98411 9.22283 1.99378 9.076C2.00345 8.92917 2.01978 8.76858 2.04278 8.59425L0.544779 7.46925C0.278113 7.25642 0.109196 6.98458 0.0380294 6.65375C-0.0331373 6.32308 0.0191126 6.01092 0.194779 5.71725L1.31203 3.79225C1.4877 3.50508 1.7342 3.30417 2.05153 3.1895C2.3687 3.07467 2.68436 3.0865 2.99853 3.225L4.72153 3.952C4.9627 3.761 5.22011 3.58633 5.49378 3.428C5.76745 3.26967 6.03636 3.14242 6.30053 3.04625L6.55428 1.175C6.60811 0.844167 6.75911 0.565667 7.00728 0.3395C7.25528 0.113167 7.54978 0 7.89078 0H10.1063C10.4473 0 10.7418 0.113167 10.9898 0.3395C11.2379 0.565667 11.3889 0.844167 11.4428 1.175L11.687 3.05575C11.987 3.16475 12.2584 3.292 12.5013 3.4375C12.7443 3.583 12.9895 3.7545 13.237 3.952L15.0083 3.225C15.3223 3.0865 15.6379 3.07467 15.9553 3.1895C16.2726 3.30417 16.519 3.50508 16.6945 3.79225L17.812 5.727C17.9877 6.0205 18.0383 6.33108 17.9638 6.65875C17.8894 6.98625 17.7189 7.25642 17.4523 7.46925L15.9158 8.623C15.9516 8.7845 15.9712 8.9355 15.9745 9.076C15.9777 9.21633 15.9793 9.35767 15.9793 9.5C15.9793 9.63583 15.976 9.774 15.9695 9.9145C15.9632 10.0548 15.9402 10.2154 15.9005 10.3963L17.408 11.5308C17.6747 11.7436 17.8469 12.0138 17.9245 12.3413C18.002 12.6689 17.9529 12.9795 17.7773 13.273L16.6445 15.2172C16.469 15.5109 16.221 15.7135 15.9005 15.825C15.58 15.9365 15.2627 15.923 14.9485 15.7845L13.237 15.048C12.9895 15.2455 12.7369 15.4202 12.4793 15.572C12.2216 15.724 11.9575 15.8481 11.687 15.9443L11.4428 17.825C11.3889 18.1558 11.2379 18.4343 10.9898 18.6605C10.7418 18.8868 10.4473 19 10.1063 19H7.89078ZM7.99853 17.5H9.96403L10.3235 14.8212C10.8339 14.6879 11.3002 14.4985 11.7225 14.253C12.145 14.0073 12.5524 13.6916 12.9448 13.3057L15.4293 14.35L16.414 12.65L14.2448 11.0155C14.3281 10.7565 14.3848 10.5026 14.4148 10.2537C14.4449 10.0051 14.46 9.75383 14.46 9.5C14.46 9.23967 14.4449 8.98842 14.4148 8.74625C14.3848 8.50392 14.3281 8.25642 14.2448 8.00375L16.433 6.35L15.4485 4.65L12.935 5.7095C12.6004 5.35183 12.1994 5.03583 11.7323 4.7615C11.2649 4.48717 10.7922 4.29292 10.314 4.17875L9.99853 1.5H8.01403L7.68303 4.16925C7.17286 4.28975 6.70178 4.47433 6.26978 4.723C5.83761 4.97183 5.42536 5.29233 5.03303 5.6845L2.54853 4.65L1.56403 6.35L3.72353 7.9595C3.6402 8.19683 3.58186 8.44367 3.54853 8.7C3.5152 8.95633 3.49853 9.22617 3.49853 9.5095C3.49853 9.76983 3.5152 10.025 3.54853 10.275C3.58186 10.525 3.63703 10.7718 3.71403 11.0155L1.56403 12.65L2.54853 14.35L5.02353 13.3C5.40303 13.6897 5.80878 14.0089 6.24078 14.2578C6.67295 14.5064 7.15053 14.6974 7.67353 14.8307L7.99853 17.5ZM9.01003 12.5C9.84203 12.5 10.55 12.208 11.134 11.624C11.718 11.04 12.01 10.332 12.01 9.5C12.01 8.668 11.718 7.96 11.134 7.376C10.55 6.792 9.84203 6.5 9.01003 6.5C8.1677 6.5 7.45711 6.792 6.87828 7.376C6.29945 7.96 6.01003 8.668 6.01003 9.5C6.01003 10.332 6.29945 11.04 6.87828 11.624C7.45711 12.208 8.1677 12.5 9.01003 12.5Z"
                          fill="currentColor"
                        />
                      </svg>
                      <span className="text-[#333333] font-source text-base font-medium group-hover:text-[#8B6941]">
                        Settings
                      </span>
                    </button>
                    {/* Divider with 12px horizontal padding */}
                    <div className="px-3">
                      <div className="w-full h-[1px] bg-[#E7DACB]" />
                    </div>
                    {/* Sign out */}
                    <button
                      onClick={handleLogout}
                      className="group w-full flex items-center gap-3 px-4 py-3
             text-[#333333]
             hover:bg-[#F4EEE7]
             hover:text-[#8B6941]
             transition-colors cursor-pointer"
                    >
                      <svg
                        width="18"
                        height="18"
                        viewBox="0 0 18 18"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                        className="text-[#808080] group-hover:text-[#8B6941] shrink-0"
                      >
                        <path
                          d="M2 18C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H8C8.28333 0 8.52083 0.0958333 8.7125 0.2875C8.90417 0.479167 9 0.716667 9 1C9 1.28333 8.90417 1.52083 8.7125 1.7125C8.52083 1.90417 8.28333 2 8 2H2V16H8C8.28333 16 8.52083 16.0958 8.7125 16.2875C8.90417 16.4792 9 16.7167 9 17C9 17.2833 8.90417 17.5208 8.7125 17.7125C8.52083 17.9042 8.28333 18 8 18H2ZM14.175 10H7C6.71667 10 6.47917 9.90417 6.2875 9.7125C6.09583 9.52083 6 9.28333 6 9C6 8.71667 6.09583 8.47917 6.2875 8.2875C6.47917 8.09583 6.71667 8 7 8H14.175L12.3 6.125C12.1167 5.94167 12.025 5.71667 12.025 5.45C12.025 5.18333 12.1167 4.95 12.3 4.75C12.4833 4.55 12.7167 4.44583 13 4.4375C13.2833 4.42917 13.525 4.525 13.725 4.725L17.3 8.3C17.5 8.5 17.6 8.73333 17.6 9C17.6 9.26667 17.5 9.5 17.3 9.7L13.725 13.275C13.525 13.475 13.2875 13.5708 13.0125 13.5625C12.7375 13.5542 12.5 13.45 12.3 13.25C12.1167 13.05 12.0292 12.8125 12.0375 12.5375C12.0458 12.2625 12.1417 12.0333 12.325 11.85L14.175 10Z"
                          fill="currentColor"
                        />
                      </svg>
                      <span className=" font-source text-base font-medium ">Sign out</span>
                    </button>
                  </div>
                )}
              </div>
            );
          })}
        </div>
      </div>
    </nav>
  );
}
 